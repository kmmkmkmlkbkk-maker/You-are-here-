<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Elite Bet | Ù…Ù†ØµØ© Ø§Ù„ÙƒØ§Ø²ÙŠÙ†Ùˆ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
    <!-- Confetti for jackpots -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <style>
        :root {
            --bg-dark: #0a0a0a;
            --panel-bg: #171717;
            --brand-green: #10b981;
            --brand-gold: #f59e0b;
        }

        body {
            font-family: 'Cairo', sans-serif;
            background-color: var(--bg-dark);
            color: #ffffff;
            user-select: none;
            overflow-x: hidden;
        }

        /* Ø·Ø±Ø§Ø­ÛŒ Ø´ÛŒØ´Ù‡ Ø§ÛŒ Ø¨Ø±Ø§ÛŒ Ù¾Ù†Ù„ Ù‡Ø§ (Glass Panel Design) */
        .casino-panel {
            background: rgba(23, 23, 23, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        .bottom-nav {
            background: rgba(10, 10, 10, 0.95);
            backdrop-filter: blur(10px);
            border-top: 1px solid rgba(255,255,255,0.05);
        }

        .nav-item.active { color: var(--brand-green); }

        /* Ø¯Ú©Ù…Ù‡ Ù‡Ø§ÛŒ Ø´Ø±Ø· Ø¨Ù†Ø¯ÛŒ (Betting Buttons) */
        .odds-btn {
            background: #262626;
            border: 1px solid #3f3f46;
            border-radius: 8px;
            transition: 0.2s;
        }
        .odds-btn:active { transform: scale(0.95); background: var(--brand-green); border-color: var(--brand-green); }

        /* Ù…Ø§Ø´ÛŒÙ† Ø§Ø³Ù„Ø§Øª (Slot Machine Styles) */
        .slot-machine {
            background: linear-gradient(180deg, #b45309, #f59e0b);
            padding: 4px;
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(245, 158, 11, 0.3);
        }
        .slot-screen {
            background: #000;
            border-radius: 16px;
            box-shadow: inset 0 10px 20px rgba(0,0,0,0.8);
            display: flex;
            justify-content: center;
            gap: 10px;
            padding: 20px;
        }
        .reel {
            width: 70px;
            height: 90px;
            background: #fff;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            box-shadow: inset 0 5px 15px rgba(0,0,0,0.3);
            position: relative;
            overflow: hidden;
        }
        .reel-content {
            position: absolute;
            transition: top 2s cubic-bezier(0.15, 0.85, 0.35, 1.2);
        }
        .spin-blur { filter: blur(4px); }

        .btn-spin {
            background: linear-gradient(to bottom, #10b981, #059669);
            box-shadow: 0 4px 0 #047857;
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        .btn-spin:active { transform: translateY(4px); box-shadow: 0 0 0 #047857; }

        /* Ø§Ù†ÛŒÙ…ÛŒØ´Ù† Ù‡Ø§ (Animations) */
        .fade-in { animation: fadeIn 0.4s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="flex justify-center min-h-screen pb-20">

    <!-- Ù„ÙˆØ¯ÛŒÙ†Ú¯ (Loader) -->
    <div id="loader" class="fixed inset-0 z-50 bg-[#0a0a0a] flex flex-col items-center justify-center transition-opacity duration-500">
        <i class="fas fa-coins text-5xl text-yellow-500 animate-bounce mb-4"></i>
        <h1 class="text-2xl font-black text-white tracking-widest uppercase">Elite Bet</h1>
    </div>

    <!-- Ø¨Ø®Ø´ ÙˆØ±ÙˆØ¯ (Auth Screen) -->
    <section id="auth-screen" class="hidden w-full max-w-md flex-col items-center justify-center p-6 h-screen">
        <div class="casino-panel p-10 w-full text-center fade-in">
            <i class="fas fa-crown text-6xl text-yellow-500 mb-6 drop-shadow-[0_0_15px_rgba(245,158,11,0.5)]"></i>
            <h1 class="text-3xl font-black mb-2">Elite Casino</h1>
            <p class="text-gray-400 text-sm mb-10">Ù…Ù†ØµØ© Ø§Ù„Ù…Ø±Ø§Ù‡Ù†Ø§Øª ÙˆØ§Ù„ÙƒØ§Ø²ÙŠÙ†Ùˆ Ø§Ù„Ø£ÙˆÙ„Ù‰. Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„Ùƒ Ù„ØªØ¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨.</p>
            <button onclick="login()" class="w-full bg-white text-black py-4 rounded-xl font-bold flex items-center justify-center gap-3 shadow-lg hover:bg-gray-100 transition">
                <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" class="w-5 h-5">
                Ø¯Ø®ÙˆÙ„ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Google
            </button>
        </div>
    </section>

    <!-- Ø¨Ø®Ø´ Ø§ØµÙ„ÛŒ Ø¨Ø±Ù†Ø§Ù…Ù‡ (Main App) -->
    <section id="main-screen" class="hidden w-full max-w-md flex-col">
        
        <!-- Ù‡Ø¯Ø± Ø¨Ø§Ù„Ø§ (Top Header) -->
        <header class="flex justify-between items-center p-4 sticky top-0 bg-[#0a0a0a]/90 backdrop-blur z-40 border-b border-white/5">
            <div class="flex items-center gap-3">
                <img id="u-photo" class="w-10 h-10 rounded-full border border-gray-600">
                <div>
                    <p id="u-name" class="text-xs font-bold text-gray-300 truncate max-w-[100px]"></p>
                    <div class="flex items-center gap-1 text-green-400 font-black text-sm">
                        <span id="u-balance">0</span> ğŸ’
                    </div>
                </div>
            </div>
            <div class="flex gap-3">
                <button onclick="switchTab('wallet')" class="w-10 h-10 rounded-full bg-green-500/20 text-green-500 flex items-center justify-center"><i class="fas fa-plus"></i></button>
                <button onclick="logout()" class="w-10 h-10 rounded-full bg-red-500/20 text-red-500 flex items-center justify-center"><i class="fas fa-sign-out-alt"></i></button>
            </div>
        </header>

        <!-- Ù†Ù…Ø§ÛŒ ÙˆØ±Ø²Ø´ (Sports Betting Tab) -->
        <div id="tab-sports" class="tab-content p-4 space-y-4 fade-in">
            <h2 class="text-xl font-black mb-4 flex items-center gap-2"><i class="fas fa-futbol text-green-500"></i> Ø£Ø¨Ø±Ø² Ø§Ù„Ù…Ø¨Ø§Ø±ÙŠØ§Øª</h2>
            
            <!-- Match 1 -->
            <div class="casino-panel p-4">
                <div class="flex justify-between items-center mb-4 text-sm font-bold">
                    <span class="flex items-center gap-2"><i class="fas fa-shield-alt text-gray-400"></i> Ø±ÙŠØ§Ù„ Ù…Ø¯Ø±ÙŠØ¯</span>
                    <span class="text-gray-500 text-xs">VS</span>
                    <span class="flex items-center gap-2">Ø¨Ø±Ø´Ù„ÙˆÙ†Ø© <i class="fas fa-shield-alt text-gray-400"></i></span>
                </div>
                <div class="grid grid-cols-3 gap-2">
                    <button onclick="placeBet('Ø±ÙŠØ§Ù„ Ù…Ø¯Ø±ÙŠØ¯', 1.8)" class="odds-btn py-3 flex flex-col items-center"><span class="text-[10px] text-gray-400">ÙÙˆØ² Ø±ÙŠØ§Ù„</span><span class="font-black text-green-400">1.80</span></button>
                    <button onclick="placeBet('ØªØ¹Ø§Ø¯Ù„ Ø§Ù„ÙƒÙ„Ø§Ø³ÙŠÙƒÙˆ', 3.2)" class="odds-btn py-3 flex flex-col items-center"><span class="text-[10px] text-gray-400">ØªØ¹Ø§Ø¯Ù„</span><span class="font-black text-yellow-400">3.20</span></button>
                    <button onclick="placeBet('Ø¨Ø±Ø´Ù„ÙˆÙ†Ø©', 2.1)" class="odds-btn py-3 flex flex-col items-center"><span class="text-[10px] text-gray-400">ÙÙˆØ² Ø¨Ø±Ø´Ø§</span><span class="font-black text-green-400">2.10</span></button>
                </div>
            </div>

            <!-- Match 2 -->
            <div class="casino-panel p-4">
                <div class="flex justify-between items-center mb-4 text-sm font-bold">
                    <span class="flex items-center gap-2"><i class="fas fa-shield-alt text-gray-400"></i> Ù…Ø§Ù† Ø³ÙŠØªÙŠ</span>
                    <span class="text-gray-500 text-xs">VS</span>
                    <span class="flex items-center gap-2">Ø£Ø±Ø³Ù†Ø§Ù„ <i class="fas fa-shield-alt text-gray-400"></i></span>
                </div>
                <div class="grid grid-cols-3 gap-2">
                    <button onclick="placeBet('Ù…Ø§Ù†Ø´Ø³ØªØ± Ø³ÙŠØªÙŠ', 1.5)" class="odds-btn py-3 flex flex-col items-center"><span class="text-[10px] text-gray-400">ÙÙˆØ² Ø³ÙŠØªÙŠ</span><span class="font-black text-green-400">1.50</span></button>
                    <button onclick="placeBet('ØªØ¹Ø§Ø¯Ù„ Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ', 4.0)" class="odds-btn py-3 flex flex-col items-center"><span class="text-[10px] text-gray-400">ØªØ¹Ø§Ø¯Ù„</span><span class="font-black text-yellow-400">4.00</span></button>
                    <button onclick="placeBet('Ø£Ø±Ø³Ù†Ø§Ù„', 4.5)" class="odds-btn py-3 flex flex-col items-center"><span class="text-[10px] text-gray-400">ÙÙˆØ² Ø£Ø±Ø³Ù†Ø§Ù„</span><span class="font-black text-green-400">4.50</span></button>
                </div>
            </div>
            
            <div class="bg-blue-900/20 border border-blue-500/30 p-4 rounded-xl text-xs text-blue-200">
                <i class="fas fa-info-circle"></i> ÙŠØªÙ… ØªØ­Ø¯ÙŠØ¯ Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù…Ø¨Ø§Ø±ÙŠØ§Øª Ø¨Ø¹Ø¯ 10 Ø«ÙˆØ§Ù†Ù Ù…Ù† ÙˆØ¶Ø¹ Ø§Ù„Ø±Ù‡Ø§Ù† Ù„ØºØ±Ø¶ Ø§Ù„Ù„Ø¹Ø¨.
            </div>
        </div>

        <!-- Ù†Ù…Ø§ÛŒ Ú©Ø§Ø²ÛŒÙ†Ùˆ (Casino Slot Tab) -->
        <div id="tab-casino" class="tab-content hidden p-4 fade-in flex flex-col items-center justify-center mt-10">
            <h2 class="text-2xl font-black mb-6 text-yellow-500 tracking-wider"><i class="fas fa-star"></i> MEGA SLOTS <i class="fas fa-star"></i></h2>
            
            <div class="slot-machine w-full mb-8">
                <div class="slot-screen">
                    <div class="reel"><div class="reel-content" id="reel1">ğŸ’</div></div>
                    <div class="reel"><div class="reel-content" id="reel2">ğŸ’</div></div>
                    <div class="reel"><div class="reel-content" id="reel3">ğŸ’</div></div>
                </div>
            </div>

            <div class="casino-panel w-full p-4 text-center mb-6">
                <p class="text-gray-400 text-sm mb-2">ØªÙƒÙ„ÙØ© Ø§Ù„Ù„ÙØ©: <span class="text-white font-bold">50 ğŸ’</span></p>
                <div class="text-[10px] text-yellow-500 font-bold mb-4">ğŸ Ø«Ù„Ø§Ø« Ø£Ø´ÙƒØ§Ù„ Ù…ØªØ´Ø§Ø¨Ù‡Ø© = 500 Ø¬ÙˆÙ‡Ø±Ø© | Ø´ÙƒÙ„Ø§Ù† = 100 Ø¬ÙˆÙ‡Ø±Ø©</div>
                <button onclick="spinSlots()" id="spin-btn" class="btn-spin w-full py-5 rounded-2xl font-black text-2xl text-white">
                    SPIN <i class="fas fa-sync-alt ml-2"></i>
                </button>
            </div>
        </div>

        <!-- Ù†Ù…Ø§ÛŒ Ú©ÛŒÙ Ù¾ÙˆÙ„ (Wallet Tab) -->
        <div id="tab-wallet" class="tab-content hidden p-4 space-y-6 fade-in mt-4">
            <div class="casino-panel p-6 text-center">
                <p class="text-gray-400 text-sm mb-2">Ø±ØµÙŠØ¯Ùƒ Ø§Ù„Ø­Ø§Ù„ÙŠ</p>
                <h2 class="text-5xl font-black text-green-400 mb-6"><span class="bal-disp">0</span> ğŸ’</h2>
                <button onclick="alert('Ø³ÙŠØªÙ… Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø³Ø­Ø¨ Ø§Ù„Ù…Ø§Ù„ÙŠ Ù‚Ø±ÙŠØ¨Ø§Ù‹.')" class="w-full bg-white/10 py-3 rounded-xl font-bold hover:bg-white/20 transition">Ø·Ù„Ø¨ Ø³Ø­Ø¨ (Cashout)</button>
            </div>

            <div class="casino-panel p-6">
                <h3 class="font-black text-lg mb-4 border-b border-white/10 pb-2"><i class="fas fa-credit-card text-blue-500"></i> Ø¥ÙŠØ¯Ø§Ø¹ Ø§Ù„Ø±ØµÙŠØ¯</h3>
                <p class="text-xs text-gray-400 mb-4">Ø£Ø¯Ø®Ù„ ÙƒÙˆØ¯ Ø§Ù„ÙƒØ§Ø±Øª ÙˆØ³ÙŠØªÙ… Ø¥Ø±Ø³Ø§Ù„Ù‡ Ù„Ù„Ø¥Ø¯Ø§Ø±Ø© Ù„Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„ÙŠÙ‡ (Ù†ÙØ³ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©).</p>
                
                <select id="dep-amount" class="w-full bg-[#0a0a0a] border border-white/10 p-3 rounded-xl mb-4 text-sm font-bold outline-none">
                    <option value="500">Ø­Ø²Ù…Ø© 500 Ø¬ÙˆÙ‡Ø±Ø©</option>
                    <option value="1500">Ø­Ø²Ù…Ø© 1,500 Ø¬ÙˆÙ‡Ø±Ø©</option>
                    <option value="5000">Ø­Ø²Ù…Ø© 5,000 Ø¬ÙˆÙ‡Ø±Ø©</option>
                </select>

                <input type="text" id="dep-code" placeholder="*133*Ø±Ù‚Ù…_Ø§Ù„ÙƒØ§Ø±Øª#" class="w-full bg-[#0a0a0a] border border-white/10 p-4 rounded-xl text-center font-mono text-lg mb-4 outline-none focus:border-green-500">
                <button onclick="submitDeposit()" class="w-full bg-green-600 hover:bg-green-500 py-4 rounded-xl font-bold transition shadow-lg shadow-green-600/20">ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¥ÙŠØ¯Ø§Ø¹</button>
            </div>
        </div>

        <!-- Ù†ÙˆØ§Ø± Ù¾Ø§ÛŒÛŒÙ† (Bottom Navigation) -->
        <nav class="bottom-nav fixed bottom-0 w-full max-w-md flex justify-around p-3 pb-5 z-40">
            <button onclick="switchTab('sports')" id="nav-sports" class="nav-item active flex flex-col items-center gap-1 w-20 transition">
                <i class="fas fa-futbol text-xl"></i><span class="text-[10px] font-bold">Ø±ÙŠØ§Ø¶Ø©</span>
            </button>
            <button onclick="switchTab('casino')" id="nav-casino" class="nav-item text-gray-500 flex flex-col items-center gap-1 w-20 transition">
                <i class="fas fa-slot-machine text-xl"></i><span class="text-[10px] font-bold">ÙƒØ§Ø²ÙŠÙ†Ùˆ</span>
            </button>
            <button onclick="switchTab('wallet')" id="nav-wallet" class="nav-item text-gray-500 flex flex-col items-center gap-1 w-20 transition">
                <i class="fas fa-wallet text-xl"></i><span class="text-[10px] font-bold">Ø§Ù„Ù…Ø­ÙØ¸Ø©</span>
            </button>
        </nav>

    </section>

    <!-- Modal Ù„Ù„Ø±Ù‡Ø§Ù† Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠ -->
    <div id="bet-modal" class="hidden fixed inset-0 z-[100] bg-black/90 flex items-center justify-center p-6 backdrop-blur-sm">
        <div class="casino-panel w-full max-w-sm p-6 text-center border-t-4 border-green-500">
            <h3 class="font-black text-lg mb-2">ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø±Ù‡Ø§Ù†</h3>
            <p id="bet-info" class="text-sm text-gray-400 mb-6"></p>
            <input type="number" id="bet-amount" placeholder="Ù…Ø¨Ù„Øº Ø§Ù„Ø±Ù‡Ø§Ù† (Ø¬ÙˆØ§Ù‡Ø±)" class="w-full bg-black/50 border border-white/10 p-4 rounded-xl text-center font-black text-xl mb-4 outline-none focus:border-green-500">
            <div class="flex gap-2">
                <button onclick="document.getElementById('bet-modal').classList.add('hidden')" class="flex-1 bg-gray-800 py-3 rounded-xl font-bold">Ø¥Ù„ØºØ§Ø¡</button>
                <button onclick="confirmBet()" class="flex-1 bg-green-600 py-3 rounded-xl font-bold text-white shadow-lg">ØªØ£ÙƒÙŠØ¯ <i class="fas fa-check ml-1"></i></button>
            </div>
        </div>
    </div>

    <!-- Ø³ÛŒØ³ØªÙ… Ù…Ù†Ø·Ù‚ (App Logic) -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInWithPopup, GoogleAuthProvider, onAuthStateChanged, signOut, setPersistence, browserLocalPersistence } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, setDoc, getDoc, onSnapshot, updateDoc, increment, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ÙØ§ÙŠØ±Ø¨ÙŠØ³ (Ù†ÙØ³ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø³Ø§Ø¨Ù‚Ø© Ù„Ø¶Ù…Ø§Ù† Ø¹Ù…Ù„ Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø¯ÙŠØ±)
        const firebaseConfig = {
            apiKey: "AIzaSyAuWgWjxvlwVLt_nxoA0g_Z_k21Yn2MuJ8",
            authDomain: "power-4ec4d.firebaseapp.com",
            projectId: "power-4ec4d",
            storageBucket: "power-4ec4d.firebasestorage.app",
            messagingSenderId: "346740944193",
            appId: "1:346740944193:web:087296b7dc7bcca6c7c5c0"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        const provider = new GoogleAuthProvider();
        
        // Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù†ÙØ³ Ø§Ù„Ù…Ø¹Ø±Ù Ø§Ù„Ø³Ø§Ø¨Ù‚ Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ Ù„ÙƒÙŠ ØªØ¸Ù‡Ø± Ø§Ù„Ø·Ù„Ø¨Ø§Øª ÙÙŠ Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø¯ÙŠØ± Ø§Ù„Ø­Ø§Ù„ÙŠØ©
        const GAME_APP_ID = 'we-are-here-sequential-v5';

        let user = null;
        let userData = { balance: 0 };
        let activeBetInfo = null;

        setPersistence(auth, browserLocalPersistence);

        // --- Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª (Authentication) ---
        onAuthStateChanged(auth, async (u) => {
            if (u) {
                user = u;
                document.getElementById('auth-screen').classList.add('hidden');
                document.getElementById('main-screen').classList.flex = 'flex';
                document.getElementById('main-screen').classList.remove('hidden');
                initUser();
            } else {
                user = null;
                document.getElementById('auth-screen').classList.flex = 'flex';
                document.getElementById('auth-screen').classList.remove('hidden');
                document.getElementById('main-screen').classList.add('hidden');
            }
            setTimeout(() => document.getElementById('loader').classList.add('hidden'), 1000);
        });

        window.login = () => signInWithPopup(auth, provider);
        window.logout = () => signOut(auth);

        async function initUser() {
            const userRef = doc(db, 'artifacts', GAME_APP_ID, 'users', user.uid, 'profile', 'data');
            onSnapshot(userRef, (snap) => {
                if (snap.exists()) {
                    userData = snap.data();
                    updateUI();
                } else {
                    setDoc(userRef, { balance: 500, name: user.displayName, photo: user.photoURL, uid: user.uid });
                }
            });
        }

        function updateUI() {
            document.getElementById('u-name').innerText = user.displayName;
            document.getElementById('u-photo').src = user.photoURL;
            document.getElementById('u-balance').innerText = userData.balance.toLocaleString();
            document.querySelectorAll('.bal-disp').forEach(e => e.innerText = userData.balance.toLocaleString());
        }

        // --- Ù…Ù†ÙˆÛŒ Ù¾Ø§ÛŒÛŒÙ† (Bottom Nav Switcher) ---
        window.switchTab = (tab) => {
            ['sports', 'casino', 'wallet'].forEach(t => {
                document.getElementById(`tab-${t}`).classList.add('hidden');
                document.getElementById(`nav-${t}`).classList.remove('active', 'text-brand-green');
                document.getElementById(`nav-${t}`).classList.add('text-gray-500');
            });
            document.getElementById(`tab-${tab}`).classList.remove('hidden');
            document.getElementById(`nav-${tab}`).classList.remove('text-gray-500');
            document.getElementById(`nav-${tab}`).classList.add('active', 'text-green-500');
        };

        // --- Ø¨Ø®Ø´ Ø´Ø±Ø· Ø¨Ù†Ø¯ÛŒ ÙˆØ±Ø²Ø´ÛŒ (Sports Betting Logic) ---
        window.placeBet = (selection, odds) => {
            activeBetInfo = { selection, odds };
            document.getElementById('bet-info').innerHTML = `Ø®ÙŠØ§Ø± Ø§Ù„Ø±Ù‡Ø§Ù†: <b class="text-white">${selection}</b> <br> Ø§Ù„Ø¹Ø§Ø¦Ø¯: <b class="text-green-400">x${odds}</b>`;
            document.getElementById('bet-modal').classList.remove('hidden');
        };

        window.confirmBet = async () => {
            const amt = parseInt(document.getElementById('bet-amount').value);
            if(!amt || amt <= 0) return alert("Ø£Ø¯Ø®Ù„ Ù…Ø¨Ù„ØºØ§Ù‹ ØµØ­ÙŠØ­Ø§Ù‹");
            if(userData.balance < amt) return alert("Ø±ØµÙŠØ¯Ùƒ Ù„Ø§ ÙŠÙƒÙÙŠ");

            document.getElementById('bet-modal').classList.add('hidden');
            document.getElementById('bet-amount').value = '';

            // Ø®ØµÙ… Ø§Ù„Ø±ØµÙŠØ¯
            const uRef = doc(db, 'artifacts', GAME_APP_ID, 'users', user.uid, 'profile', 'data');
            await updateDoc(uRef, { balance: increment(-amt) });
            alert(`ØªÙ… ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø±Ù‡Ø§Ù† Ø¨Ù‚ÙŠÙ…Ø© ${amt} Ø¬ÙˆÙ‡Ø±Ø©. Ø³ÙŠØªÙ… Ø¥Ø¹Ù„Ø§Ù† Ø§Ù„Ù†ØªÙŠØ¬Ø© Ù‚Ø±ÙŠØ¨Ø§Ù‹.`);

            // Ù…Ø­Ø§ÙƒØ§Ø© Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø¨Ø¹Ø¯ 10 Ø«ÙˆØ§Ù†Ù
            setTimeout(async () => {
                const win = Math.random() > 0.5; // ÙØ±ØµØ© 50%
                if(win) {
                    const prize = Math.floor(amt * activeBetInfo.odds);
                    await updateDoc(uRef, { balance: increment(prize) });
                    confetti({ particleCount: 100, spread: 70, origin: { y: 0.6 } });
                    alert(`âœ… ÙÙˆØ²! ÙƒØ³Ø¨Øª Ø±Ù‡Ø§Ù†Ùƒ Ø¹Ù„Ù‰ (${activeBetInfo.selection}) ÙˆØªÙ…Øª Ø¥Ø¶Ø§ÙØ© ${prize} Ø¬ÙˆÙ‡Ø±Ø©.`);
                } else {
                    alert(`âŒ Ø®Ø³Ø§Ø±Ø©.. Ù„Ù… ÙŠÙ†Ø¬Ø­ Ø±Ù‡Ø§Ù†Ùƒ Ø¹Ù„Ù‰ (${activeBetInfo.selection}). Ø­Ø¸Ø§Ù‹ Ø£ÙˆÙØ±.`);
                }
            }, 10000);
        };

        // --- Ø¨Ø®Ø´ Ú©Ø§Ø²ÛŒÙ†Ùˆ (Casino Slots Logic) ---
        const slotSymbols = ['ğŸ’', 'ğŸ‹', 'ğŸ””', 'ğŸ’', '7ï¸âƒ£'];
        const spinCost = 50;

        window.spinSlots = async () => {
            if(userData.balance < spinCost) return alert("ØªØ­ØªØ§Ø¬ 50 Ø¬ÙˆÙ‡Ø±Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„ Ù„Ù„Ø¹Ø¨.");
            
            const btn = document.getElementById('spin-btn');
            btn.disabled = true; btn.style.opacity = '0.5';

            // Ø®ØµÙ… Ø§Ù„ØªÙƒÙ„ÙØ©
            const uRef = doc(db, 'artifacts', GAME_APP_ID, 'users', user.uid, 'profile', 'data');
            await updateDoc(uRef, { balance: increment(-spinCost) });

            // Ø§Ù†ÛŒÙ…ÛŒØ´Ù† Ú†Ø±Ø®ÛŒØ¯Ù† (Animation)
            const r1 = document.getElementById('reel1');
            const r2 = document.getElementById('reel2');
            const r3 = document.getElementById('reel3');

            r1.classList.add('spin-blur'); r2.classList.add('spin-blur'); r3.classList.add('spin-blur');
            
            let counter = 0;
            const spinInterval = setInterval(() => {
                r1.innerText = slotSymbols[Math.floor(Math.random() * slotSymbols.length)];
                r2.innerText = slotSymbols[Math.floor(Math.random() * slotSymbols.length)];
                r3.innerText = slotSymbols[Math.floor(Math.random() * slotSymbols.length)];
                counter++;
                if(counter > 20) {
                    clearInterval(spinInterval);
                    finishSpin(r1, r2, r3, uRef, btn);
                }
            }, 100);
        };

        async function finishSpin(r1, r2, r3, uRef, btn) {
            r1.classList.remove('spin-blur'); r2.classList.remove('spin-blur'); r3.classList.remove('spin-blur');
            
            const res1 = slotSymbols[Math.floor(Math.random() * slotSymbols.length)];
            const res2 = slotSymbols[Math.floor(Math.random() * slotSymbols.length)];
            const res3 = slotSymbols[Math.floor(Math.random() * slotSymbols.length)];

            // Ù„ØªØ³Ù‡ÙŠÙ„ Ø§Ù„ÙÙˆØ² Ù„Ø£ØºØ±Ø§Ø¶ Ø§Ù„Ø¹Ø±Ø¶ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªÙ„Ø§Ø¹Ø¨ Ø¨Ø§Ù„Ø§Ø­ØªÙ…Ø§Ù„Ø§ØªØŒ Ù„ÙƒÙ† Ø³Ù†ØªØ±ÙƒÙ‡Ø§ Ø¹Ø´ÙˆØ§Ø¦ÙŠØ©
            r1.innerText = res1; r2.innerText = res2; r3.innerText = res3;

            if (res1 === res2 && res2 === res3) {
                // Ø§Ù„ÙÙˆØ² Ø§Ù„Ø£ÙƒØ¨Ø± (Jackpot)
                confetti({ particleCount: 200, spread: 100, origin: { y: 0.5 } });
                await updateDoc(uRef, { balance: increment(500) });
                setTimeout(() => alert("MEGA WIN! ğŸ° Ø±Ø¨Ø­Øª 500 Ø¬ÙˆÙ‡Ø±Ø©!"), 500);
            } else if (res1 === res2 || res2 === res3 || res1 === res3) {
                // ÙÙˆØ² ØµØºÙŠØ±
                await updateDoc(uRef, { balance: increment(100) });
                setTimeout(() => alert("Good Win! âœ¨ Ø±Ø¨Ø­Øª 100 Ø¬ÙˆÙ‡Ø±Ø©!"), 500);
            }

            btn.disabled = false; btn.style.opacity = '1';
        }

        // --- Ø¨Ø®Ø´ ÙˆØ§Ø±ÛŒØ² (Wallet Deposit - Connected to Admin) ---
        window.submitDeposit = async () => {
            const code = document.getElementById('dep-code').value.trim();
            const amt = parseInt(document.getElementById('dep-amount').value);
            
            if(!code || code.length < 5) return alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙˆØ¯ Ø§Ù„ÙƒØ§Ø±Øª Ø§Ù„ØµØ­ÙŠØ­.");

            try {
                // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ù„Ù†ÙØ³ Ù…Ø³Ø§Ø± ØªØ·Ø¨ÙŠÙ‚ "Ù†Ø­Ù† Ù‡Ù†Ø§" Ù„ÙƒÙŠ ØªØ±Ø§Ù‡ ÙÙŠ Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø¯ÙŠØ±
                await addDoc(collection(db, 'artifacts', GAME_APP_ID, 'public', 'data', 'deposit_requests'), {
                    userId: user.uid,
                    userName: user.displayName,
                    userDisplayId: userData.displayId || 'CasinoUser',
                    cardCode: code,
                    gems: amt,
                    timestamp: serverTimestamp()
                });
                alert("ØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ù„Ù„Ø¥Ø¯Ø§Ø±Ø© Ø¨Ù†Ø¬Ø§Ø­. Ø³ÙŠØªÙ… ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø¬ÙˆØ§Ù‡Ø± ÙÙˆØ± Ø§Ù„ØªØ£ÙƒØ¯.");
                document.getElementById('dep-code').value = '';
            } catch(e) {
                alert("Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„: " + e.message);
            }
        };

    </script>
</body>
</html>
