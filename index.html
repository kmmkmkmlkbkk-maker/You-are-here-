<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù†Ø­Ù† Ù‡Ù†Ø§ | We Are Here</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700;900&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js"></script>
    
    <style>
        :root {
            --bg: #010413;
            --surface: #0f172a;
            --accent: #3b82f6;
            --secondary: #8b5cf6;
        }

        body {
            font-family: 'Cairo', sans-serif;
            background-color: var(--bg);
            color: #f1f5f9;
            overflow-x: hidden;
            user-select: none;
        }

        .fluid-card {
            background: rgba(15, 23, 42, 0.7);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 30px 60px -12px rgba(0, 0, 0, 0.5);
            border-radius: 2.5rem;
        }

        .btn-fluid {
            background: linear-gradient(135deg, var(--accent) 0%, var(--secondary) 100%);
            box-shadow: 0 10px 25px -5px rgba(59, 130, 246, 0.4);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border-radius: 1.5rem;
        }

        .btn-fluid:active { transform: scale(0.95); }

        .glass-input {
            background: rgba(2, 6, 23, 0.7);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 1.25rem;
            transition: all 0.3s;
        }

        .page-fade { animation: fadeIn 0.6s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .dice-spin { animation: spin 0.5s ease-in-out infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center">

    <!-- Splash Loader -->
    <div id="splash" class="fixed inset-0 z-[3000] bg-[#010413] flex flex-col items-center justify-center transition-opacity duration-1000">
        <div class="relative w-20 h-20 mb-6">
            <div class="absolute inset-0 rounded-full border-2 border-blue-500/10"></div>
            <div class="absolute inset-0 rounded-full border-t-2 border-blue-500 animate-spin"></div>
            <i class="fas fa-gem absolute inset-0 flex items-center justify-center text-3xl text-blue-500"></i>
        </div>
        <h1 class="text-blue-100 font-black tracking-[0.4em] text-xs opacity-50">Ù†Ø­Ù† Ù‡Ù†Ø§</h1>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInWithPopup, GoogleAuthProvider, onAuthStateChanged, signOut, setPersistence, browserLocalPersistence } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, setDoc, getDoc, onSnapshot, updateDoc, increment, collection, query, getDocs, addDoc, deleteDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // Firebase Config (Official power-4ec4d)
        const firebaseConfig = {
            apiKey: "AIzaSyAuWgWjxvlwVLt_nxoA0g_Z_k21Yn2MuJ8",
            authDomain: "power-4ec4d.firebaseapp.com",
            projectId: "power-4ec4d",
            storageBucket: "power-4ec4d.firebasestorage.app",
            messagingSenderId: "346740944193",
            appId: "1:346740944193:web:087296b7dc7bcca6c7c5c0"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        const provider = new GoogleAuthProvider();
        const appId = 'we-are-here-pro-v1';

        let user = null;
        let userData = { balance: 0 };
        let currentGameId = null;
        let gameSub = null;
        let searchInterval = null;

        // --- Auth Persistence ---
        setPersistence(auth, browserLocalPersistence);

        onAuthStateChanged(auth, async (u) => {
            const viewAuth = document.getElementById('view-auth');
            const viewMain = document.getElementById('view-main');
            const splash = document.getElementById('splash');

            if (u) {
                user = u;
                viewAuth.classList.add('hidden');
                viewMain.classList.remove('hidden');
                initUser();
            } else {
                user = null;
                viewAuth.classList.remove('hidden');
                viewMain.classList.add('hidden');
            }
            setTimeout(() => { splash.style.opacity = '0'; setTimeout(() => splash.classList.add('hidden'), 1000); }, 1500);
        });

        window.login = () => signInWithPopup(auth, provider);
        window.logout = () => signOut(auth);

        async function initUser() {
            const userRef = doc(db, 'artifacts', appId, 'users', user.uid, 'profile', 'data');
            onSnapshot(userRef, (snap) => {
                if (snap.exists()) {
                    userData = snap.data();
                    updateDisplay();
                } else {
                    setDoc(userRef, { balance: 500, name: user.displayName, photo: user.photoURL, uid: user.uid });
                }
            });
        }

        function updateDisplay() {
            document.querySelectorAll('.bal-val').forEach(el => el.innerText = userData.balance.toLocaleString());
            document.getElementById('u-name').innerText = user.displayName;
            document.getElementById('u-photo').src = user.photoURL;
        }

        window.showScreen = (id) => {
            document.querySelectorAll('.screen').forEach(s => s.classList.add('hidden'));
            document.getElementById(id).classList.remove('hidden');
            if (id === 'lobby' && gameSub) { gameSub(); gameSub = null; }
        };

        // --- Matchmaking & Games ---
        window.startSearch = async () => {
            const bet = parseInt(document.getElementById('bet-select').value);
            if (userData.balance < bet) return alert("Ø±ØµÙŠØ¯Ùƒ Ù„Ø§ ÙŠÙƒÙÙŠ Ù„Ù‡Ø°Ø§ Ø§Ù„ØªØ­Ø¯ÙŠ.");

            document.getElementById('search-overlay').classList.remove('hidden');
            
            // Search for an existing match
            const gamesRef = collection(db, 'artifacts', appId, 'public', 'data', 'games');
            const qSnap = await getDocs(gamesRef);
            let targetGameId = null;

            qSnap.forEach(doc => {
                const data = doc.data();
                if (data.status === 'waiting' && data.bet === bet && data.p1.id !== user.uid) {
                    targetGameId = doc.id;
                }
            });

            if (targetGameId) {
                joinMatch(targetGameId, bet);
            } else {
                const newId = "room_" + Math.floor(Math.random() * 1000000);
                createMatch(newId, bet);
            }
        };

        async function createMatch(id, bet) {
            await updateDoc(doc(db, 'artifacts', appId, 'users', user.uid, 'profile', 'data'), { balance: increment(-bet) });
            await setDoc(doc(db, 'artifacts', appId, 'public', 'data', 'games', id), {
                p1: { id: user.uid, name: user.displayName, photo: user.photoURL, rolls: [], total: 0, lastSeen: Date.now() },
                bet, status: 'waiting', turn: 1, createdAt: serverTimestamp()
            });
            listenToMatch(id);
        }

        async function joinMatch(id, bet) {
            const gRef = doc(db, 'artifacts', appId, 'public', 'data', 'games', id);
            await updateDoc(doc(db, 'artifacts', appId, 'users', user.uid, 'profile', 'data'), { balance: increment(-bet) });
            await updateDoc(gRef, {
                p2: { id: user.uid, name: user.displayName, photo: user.photoURL, rolls: [], total: 0, lastSeen: Date.now() },
                status: 'playing', lastAction: Date.now()
            });
            listenToMatch(id);
        }

        window.cancelSearch = async () => {
            if (currentGameId) {
                const gRef = doc(db, 'artifacts', appId, 'public', 'data', 'games', currentGameId);
                const snap = await getDoc(gRef);
                const data = snap.data();
                if (data.status === 'waiting') {
                    await updateDoc(doc(db, 'artifacts', appId, 'users', user.uid, 'profile', 'data'), { balance: increment(data.bet) });
                    await deleteDoc(gRef);
                }
            }
            document.getElementById('search-overlay').classList.add('hidden');
            showScreen('lobby');
        };

        function listenToMatch(id) {
            currentGameId = id;
            document.getElementById('search-overlay').classList.add('hidden');
            showScreen('view-game');
            
            gameSub = onSnapshot(doc(db, 'artifacts', appId, 'public', 'data', 'games', id), (snap) => {
                if (snap.exists()) {
                    const data = snap.data();
                    renderBoard(data);
                    checkTimeout(data);
                }
            });
        }

        // Timeout Logic: 60 Seconds
        function checkTimeout(data) {
            if (data.status !== 'playing') return;
            const now = Date.now();
            const lastAction = data.lastAction || data.createdAt?.toMillis();
            if (now - lastAction > 60000) { // 60 Seconds
                // The player who DIDN'T take the last action wins
                const winner = data.turn === 1 ? 2 : 1;
                forceEnd(winner);
            }
        }

        async function forceEnd(winnerIdx) {
            const gRef = doc(db, 'artifacts', appId, 'public', 'data', 'games', currentGameId);
            await updateDoc(gRef, { status: 'finished', winner: winnerIdx });
        }

        function renderBoard(data) {
            const area = document.getElementById('arena');
            const isP1 = data.p1.id === user.uid;
            const myTurn = (data.turn === 1 && isP1) || (data.turn === 2 && !isP1);

            let html = `<div class="text-center mb-8"><span class="bg-blue-600/10 text-blue-400 px-4 py-1 rounded-full text-[10px] font-black border border-blue-500/20">Ø§Ù„ØªØ­Ø¯ÙŠ: ${(data.bet * 2).toLocaleString()} ğŸ’</span></div>`;

            if (data.status === 'waiting') {
                html += `
                    <div class="py-24 text-center">
                        <div class="dice-spin text-4xl text-blue-500 mb-6"><i class="fas fa-dice"></i></div>
                        <p class="text-gray-400 mb-8">Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ù…Ù†Ø§ÙØ³...</p>
                        <button onclick="cancelSearch()" class="text-red-500 font-bold text-sm underline">Ø¥Ù„ØºØ§Ø¡ ÙˆØ§Ù„Ø§Ù†Ø³Ø­Ø§Ø¨</button>
                    </div>
                `;
            } else if (data.status === 'playing') {
                html += `
                    <div class="grid grid-cols-2 gap-4 mb-10">
                        <div class="fluid-card p-5 flex flex-col items-center border-2 ${data.turn===1?'border-blue-500 shadow-blue-500/20':'border-transparent opacity-40'}">
                            <img src="${data.p1.photo}" class="w-14 h-14 rounded-2xl mb-2 border border-slate-700">
                            <div class="text-xs font-black">${data.p1.total}</div>
                        </div>
                        <div class="fluid-card p-5 flex flex-col items-center border-2 ${data.turn===2?'border-blue-500 shadow-blue-500/20':'border-transparent opacity-40'}">
                            <img src="${data.p2.photo}" class="w-14 h-14 rounded-2xl mb-2 border border-slate-700">
                            <div class="text-xs font-black">${data.p2.total}</div>
                        </div>
                    </div>
                    <div class="flex flex-col items-center">
                        ${myTurn ? `
                            <button onclick="roll()" class="btn-fluid w-24 h-24 text-4xl flex items-center justify-center"><i class="fas fa-dice"></i></button>
                            <p class="mt-4 text-blue-400 font-black animate-pulse">Ø¯ÙˆØ±Ùƒ Ø§Ù„Ø¢Ù†</p>
                        ` : `<p class="text-gray-500 italic text-sm">Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ø®ØµÙ… (60 Ø«Ø§Ù†ÙŠØ© Ù…Ù‡Ù„Ø©)...</p>`}
                    </div>
                `;
            } else {
                const iWon = data.winner === (isP1 ? 1 : 2);
                html += `
                    <div class="text-center py-10 page-fade">
                        <div class="text-7xl mb-6">${iWon ? 'ğŸ‘‘' : 'ğŸ¥ˆ'}</div>
                        <h2 class="text-2xl font-black mb-2">${iWon ? 'Ù…Ø¨Ø±ÙˆÙƒ Ø§Ù„ÙÙˆØ²!' : 'Ø­Ø¸ Ø£ÙˆÙØ±'}</h2>
                        <p class="text-xs text-gray-500 mb-10">${iWon ? `ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¬ÙˆØ§Ù‡Ø± Ù„Ø­Ø³Ø§Ø¨Ùƒ` : 'Ø­Ø§ÙˆÙ„ Ù…Ø¬Ø¯Ø¯Ø§Ù‹ ÙÙŠ Ø¬ÙˆÙ„Ø© Ø£Ø®Ø±Ù‰'}</p>
                        <button onclick="location.reload()" class="btn-fluid w-full py-4 font-bold">Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
                    </div>
                `;
                if(iWon && !data.paid) payout(data);
            }
            area.innerHTML = html;
        }

        window.roll = async () => {
            const gRef = doc(db, 'artifacts', appId, 'public', 'data', 'games', currentGameId);
            const data = (await getDoc(gRef)).data();
            const isP1 = data.p1.id === user.uid;
            const me = isP1 ? data.p1 : data.p2;

            if (me.rolls.length >= 2) return;
            const val = Math.floor(Math.random() * 6) + 1;
            const rolls = [...me.rolls, val];
            const total = rolls.reduce((a,b)=>a+b, 0);

            const key = isP1 ? 'p1' : 'p2';
            const upd = { [`${key}.rolls`]: rolls, [`${key}.total`]: total, lastAction: Date.now() };

            if (rolls.length === 2) {
                if (isP1) upd.turn = 2;
                else { upd.status = 'finished'; upd.winner = data.p1.total > total ? 1 : (total > data.p1.total ? 2 : 0); }
            }
            await updateDoc(gRef, upd);
        };

        async function payout(data) {
            const userRef = doc(db, 'artifacts', appId, 'users', user.uid, 'profile', 'data');
            await updateDoc(userRef, { balance: increment(data.bet * 2) });
            await updateDoc(doc(db, 'artifacts', appId, 'public', 'data', 'games', currentGameId), { paid: true });
        }

        // --- Store System ---
        window.openShip = (gems) => {
            window.targetGems = gems;
            document.getElementById('modal-ship').classList.remove('hidden');
            document.getElementById('ship-info').innerText = `Ø­Ø²Ù…Ø© ${gems} Ø¬ÙˆÙ‡Ø±Ø©`;
        };

        window.submitShip = async () => {
            const code = document.getElementById('ship-code').value.trim();
            if(!code) return alert("Ø£Ø¯Ø®Ù„ Ø§Ù„Ø±Ù…Ø² Ø£ÙˆÙ„Ø§Ù‹.");
            await addDoc(collection(db, 'artifacts', appId, 'public', 'data', 'deposit_requests'), {
                userId: user.uid, userName: user.displayName, cardCode: code, gems: window.targetGems, timestamp: serverTimestamp()
            });
            alert("ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ØŒ Ø³ØªØµÙ„Ùƒ Ø§Ù„Ø¬ÙˆØ§Ù‡Ø± ÙÙˆØ± Ø§Ù„ØªØ£ÙƒØ¯.");
            document.getElementById('modal-ship').classList.add('hidden');
        };

    </script>

    <!-- Auth View -->
    <section id="view-auth" class="hidden min-h-screen flex flex-col items-center justify-center p-8 text-center w-full max-w-sm">
        <div class="fluid-card w-24 h-24 flex items-center justify-center text-4xl text-blue-500 mb-10 shadow-2xl">
            <i class="fas fa-dice-d20"></i>
        </div>
        <h1 class="text-4xl font-black mb-4 tracking-tighter">Ù†Ø­Ù† Ù‡Ù†Ø§</h1>
        <p class="text-gray-400 text-sm mb-12">Ø§Ø¯Ø®Ù„ Ø¹Ø§Ù„Ù… Ø§Ù„ØªØ­Ø¯ÙŠØ§ØªØŒ Ø§Ø¬Ù…Ø¹ Ø§Ù„Ø¬ÙˆØ§Ù‡Ø± ÙˆØ­ÙˆÙ„Ù‡Ø§ Ù„Ù…ÙƒØ§ÙØ¢Øª Ø­Ù‚ÙŠÙ‚ÙŠØ©.</p>
        <button onclick="login()" class="btn-fluid w-full py-5 font-black text-lg flex items-center justify-center gap-4">
            <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" class="w-6 h-6">
            Ø¯Ø®ÙˆÙ„ Ø¹Ø¨Ø± Google
        </button>
    </section>

    <!-- Main App View -->
    <section id="view-main" class="hidden w-full max-w-md p-6 pt-10">
        
        <!-- Header -->
        <header class="flex justify-between items-center mb-10 fluid-card p-4">
            <div class="flex items-center gap-3">
                <img id="u-photo" class="w-12 h-12 rounded-2xl border-2 border-blue-500/40 p-0.5 object-cover">
                <div class="leading-none">
                    <h3 id="u-name" class="font-bold text-[10px] truncate max-w-[120px] opacity-70 mb-1">---</h3>
                    <div class="bg-blue-600/10 px-3 py-1 rounded-xl text-blue-400 font-black text-xs inline-block">
                        <span class="bal-val">0</span> ğŸ’
                    </div>
                </div>
            </div>
            <button onclick="logout()" class="w-10 h-10 fluid-card flex items-center justify-center text-red-500 hover:bg-red-500/10 transition-colors">
                <i class="fas fa-power-off text-sm"></i>
            </button>
        </header>

        <!-- Screen: Lobby -->
        <div id="lobby" class="screen space-y-8 page-fade">
            <div class="fluid-card p-10 text-center relative overflow-hidden">
                <h2 class="text-2xl font-black mb-8 tracking-tight">Ø³Ø§Ø­Ø© Ø§Ù„ØªØ­Ø¯ÙŠ</h2>
                <div class="space-y-6">
                    <div class="text-right">
                        <label class="text-[10px] text-gray-500 block mb-2 font-black uppercase tracking-widest px-2">Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø¬ÙˆÙ„Ø©</label>
                        <select id="bet-select" class="w-full glass-input p-4 font-black text-xl text-center">
                            <option value="100">100 ğŸ’</option>
                            <option value="500" selected>500 ğŸ’</option>
                            <option value="1000">1,000 ğŸ’</option>
                        </select>
                    </div>
                    <button onclick="startSearch()" class="btn-fluid w-full py-5 font-black text-xl flex items-center justify-center gap-3">
                        <i class="fas fa-bolt"></i> Ø¨Ø­Ø« Ø³Ø±ÙŠØ¹
                    </button>
                </div>
            </div>

            <div class="grid grid-cols-2 gap-5">
                <button onclick="showScreen('store')" class="fluid-card p-8 flex flex-col items-center gap-4 transition hover:scale-105 active:scale-95">
                    <div class="w-12 h-12 bg-blue-500/10 rounded-2xl flex items-center justify-center text-blue-400 text-xl"><i class="fas fa-shopping-bag"></i></div>
                    <span class="font-bold text-xs">Ø§Ù„Ù…ØªØ¬Ø±</span>
                </button>
                <button onclick="showScreen('rewards')" class="fluid-card p-8 flex flex-col items-center gap-4 transition hover:scale-105 active:scale-95">
                    <div class="w-12 h-12 bg-yellow-500/10 rounded-2xl flex items-center justify-center text-yellow-500 text-xl"><i class="fas fa-wallet"></i></div>
                    <span class="font-bold text-xs">Ø³Ø­Ø¨ Ø§Ù„Ø±Ø¨Ø­</span>
                </button>
            </div>
            
            <div class="fluid-card p-6 border-l-4 border-blue-500 bg-blue-500/5 text-xs text-gray-400 italic">
                <i class="fas fa-info-circle ml-2 text-blue-500"></i>
                Ù†Ø¸Ø§Ù… ØªØ¹Ù„ÙŠÙ…ÙŠ: Ø§Ù„Ø¬ÙˆØ§Ù‡Ø± Ù‡ÙŠ Ø±ØµÙŠØ¯Ùƒ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ. ÙŠÙ…ÙƒÙ†Ùƒ Ø²ÙŠØ§Ø¯ØªÙ‡ Ù…Ù† Ø§Ù„Ù…ØªØ¬Ø± ÙˆØªØ­ÙˆÙŠÙ„ Ø£Ø±Ø¨Ø§Ø­Ùƒ Ù„Ù…Ø¨Ø§Ù„Øº Ø­Ù‚ÙŠÙ‚ÙŠØ© Ù…Ù† "Ø³Ø­Ø¨ Ø§Ù„Ø±Ø¨Ø­".
            </div>
        </div>

        <!-- Store View -->
        <div id="store" class="screen hidden space-y-6 page-fade">
            <button onclick="showScreen('lobby')" class="text-gray-500 font-bold mb-4 flex items-center gap-2"><i class="fas fa-arrow-right"></i> Ø±Ø¬ÙˆØ¹</button>
            <h2 class="text-3xl font-black mb-8 tracking-tighter">Ø´Ø±Ø§Ø¡ Ø§Ù„Ø¬ÙˆØ§Ù‡Ø± ğŸ’</h2>
            <div class="space-y-4">
                <div onclick="openShip(500)" class="fluid-card p-6 flex justify-between items-center cursor-pointer border-r-4 border-blue-500 hover:bg-blue-500/5 transition-all">
                    <div><p class="font-black text-lg">500 Ø¬ÙˆÙ‡Ø±Ø©</p><p class="text-[10px] opacity-40">Ù‚ÙŠÙ…Ø© Ø§Ù„ØªØ¨Ø§Ø¯Ù„: 5$ Ø¢Ø³ÙŠØ§</p></div>
                    <i class="fas fa-plus text-blue-500 opacity-40"></i>
                </div>
                <div onclick="openShip(1500)" class="fluid-card p-6 flex justify-between items-center cursor-pointer border-r-4 border-indigo-500 hover:bg-indigo-500/5 transition-all">
                    <div><p class="font-black text-lg">1500 Ø¬ÙˆÙ‡Ø±Ø©</p><p class="text-[10px] opacity-40">Ù‚ÙŠÙ…Ø© Ø§Ù„ØªØ¨Ø§Ø¯Ù„: 15$ Ø¢Ø³ÙŠØ§</p></div>
                    <i class="fas fa-plus text-indigo-500 opacity-40"></i>
                </div>
                <div onclick="openShip(5000)" class="fluid-card p-6 flex justify-between items-center cursor-pointer border-r-4 border-purple-500 hover:bg-purple-500/5 transition-all">
                    <div><p class="font-black text-lg">5,000 Ø¬ÙˆÙ‡Ø±Ø©</p><p class="text-[10px] opacity-40">Ù‚ÙŠÙ…Ø© Ø§Ù„ØªØ¨Ø§Ø¯Ù„: 50$ Ø¢Ø³ÙŠØ§</p></div>
                    <i class="fas fa-plus text-purple-500 opacity-40"></i>
                </div>
                <div onclick="openShip(15000)" class="fluid-card p-6 flex justify-between items-center cursor-pointer border-r-4 border-yellow-500 hover:bg-yellow-500/5 transition-all">
                    <div><p class="font-black text-lg">15,000 Ø¬ÙˆÙ‡Ø±Ø©</p><p class="text-[10px] opacity-40 font-bold text-yellow-500">Ù‚ÙŠÙ…Ø© Ø§Ù„ØªØ¨Ø§Ø¯Ù„: 150$ Ø¢Ø³ÙŠØ§</p></div>
                    <i class="fas fa-plus text-yellow-500 opacity-40"></i>
                </div>
            </div>
        </div>

        <!-- Rewards View -->
        <div id="rewards" class="screen hidden text-center page-fade">
            <button onclick="showScreen('lobby')" class="text-gray-500 font-bold mb-8 block text-right px-2"><i class="fas fa-arrow-right"></i> Ø±Ø¬ÙˆØ¹</button>
            <div class="fluid-card p-12">
                <div class="w-20 h-20 bg-blue-600/10 text-blue-400 rounded-3xl flex items-center justify-center text-4xl mx-auto mb-8 shadow-inner"><i class="fas fa-exchange-alt"></i></div>
                <h2 class="text-2xl font-black mb-10 tracking-tight">Ø³Ø­Ø¨ Ø§Ù„Ø±Ø¨Ø­</h2>
                <div class="glass-input p-6 mb-10">
                    <p class="text-[10px] text-gray-500 font-black mb-2 uppercase tracking-widest">Ø±ØµÙŠØ¯Ùƒ Ø§Ù„Ù…ØªØ§Ø­ Ù„Ù„Ø³Ø­Ø¨</p>
                    <div class="text-5xl font-black text-blue-400 tracking-tighter bal-val">0</div>
                    <p class="text-[10px] text-blue-400/50 mt-4 font-bold">ÙƒÙ„ 100 Ø¬ÙˆÙ‡Ø±Ø© = 1,000 Ø¯ÙŠÙ†Ø§Ø± Ø¹Ø±Ø§Ù‚ÙŠ</p>
                </div>
                <button onclick="alert('Ø³ÙŠØªÙ… Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø·Ù„Ø¨ ÙˆØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø±ØµÙŠØ¯ Ø®Ù„Ø§Ù„ 24 Ø³Ø§Ø¹Ø©.')" class="btn-fluid w-full py-5 font-black text-xl">ØªØ£ÙƒÙŠØ¯ Ø·Ù„Ø¨ Ø§Ù„Ø³Ø­Ø¨</button>
            </div>
        </div>

        <!-- Game Arena -->
        <div id="view-game" class="screen hidden"><div id="arena" class="fluid-card p-10 min-h-[500px]"></div></div>

    </section>

    <!-- Overlay: Searching -->
    <div id="search-overlay" class="hidden fixed inset-0 z-[4000] bg-slate-950/95 backdrop-blur-2xl flex flex-col items-center justify-center p-8">
        <div class="dice-spin text-7xl text-blue-500 mb-8"><i class="fas fa-dice"></i></div>
        <h3 class="text-2xl font-black mb-4 animate-pulse">Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ù…Ù†Ø§ÙØ³...</h3>
        <button onclick="cancelSearch()" class="text-red-500 font-bold text-sm underline opacity-50 hover:opacity-100 transition-opacity">ØªØ±Ø§Ø¬Ø¹ Ø¹Ù† Ø§Ù„Ø¨Ø­Ø«</button>
    </div>

    <!-- Modal: Card Deposit -->
    <div id="modal-ship" class="hidden fixed inset-0 z-[3000] bg-[#010413]/95 backdrop-blur-2xl flex items-center justify-center p-8">
        <div class="fluid-card w-full max-w-sm p-10 relative border-t-4 border-blue-600">
            <button onclick="document.getElementById('modal-ship').classList.add('hidden')" class="absolute top-6 left-6 text-gray-500"><i class="fas fa-times text-xl"></i></button>
            <div class="text-center">
                <div class="w-16 h-16 bg-blue-600/10 rounded-2xl mx-auto mb-6 flex items-center justify-center text-3xl text-blue-500 shadow-inner"><i class="fas fa-unlock-alt"></i></div>
                <h3 class="text-2xl font-black mb-1 tracking-tighter">ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø­Ø²Ù…Ø©</h3>
                <p id="ship-info" class="text-xs text-gray-500 mb-8 font-bold"></p>
                <div class="text-right mb-8">
                    <label class="text-[10px] text-gray-600 block mb-2 font-black uppercase tracking-widest px-2">Ø±Ù…Ø² Ø§Ù„Ù‚Ø³ÙŠÙ…Ø© Ø£Ùˆ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©</label>
                    <input id="ship-code" type="text" placeholder="*133*Ø§Ù„Ø±Ù…Ø²#" class="w-full glass-input p-5 font-mono text-2xl tracking-widest placeholder:text-slate-800">
                </div>
                <button onclick="submitShip()" class="btn-fluid w-full py-5 font-black text-xl shadow-blue-500/30">ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨</button>
                <p class="mt-8 text-[10px] text-gray-600 italic leading-relaxed px-4">ÙŠØªÙ… Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø±Ù…ÙˆØ² ÙŠØ¯ÙˆÙŠØ§Ù‹ Ù„Ø¶Ù…Ø§Ù† Ø£Ø¹Ù„Ù‰ Ù…Ø³ØªÙˆÙŠØ§Øª Ø§Ù„Ø£Ù…Ø§Ù† Ø§Ù„Ù…Ø§Ù„ÙŠ.</p>
            </div>
        </div>
    </div>

</body>
</html>
